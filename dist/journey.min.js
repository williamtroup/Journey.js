"use strict";var Constant,Constant2,Is,Default,DomElement,Binding,Config,Trigger,ToolTip,Disabled;Constant2=Constant||(Constant={}),Constant2.JOURNEY_JS_ATTRIBUTE_NAME="data-journey-js",Constant2.DEFAULT_GROUP="default",(e=>{function t(e){return null!=e&&""!==e}function o(e){return t(e)&&"object"==typeof e}e.defined=t,e.definedObject=o,e.definedBoolean=function(e){return t(e)&&"boolean"==typeof e},e.definedString=function(e){return t(e)&&"string"==typeof e},e.definedFunction=function(e){return t(e)&&"function"==typeof e},e.definedNumber=function(e){return t(e)&&"number"==typeof e},e.definedArray=function(e){return o(e)&&e instanceof Array}})(Is||(Is={})),(e=>{function t(e,t){return Is.definedArray(e)?e:t}e.getAnyString=function(e,t){return"string"==typeof e?e:t},e.getString=function(e,t){return Is.definedString(e)?e:t},e.getBoolean=function(e,t){return Is.definedBoolean(e)?e:t},e.getNumber=function(e,t){return Is.definedNumber(e)?e:t},e.getFunction=function(e,t){return Is.definedFunction(e)?e:t},e.getObject=function(e,t){return Is.definedObject(e)?e:t},e.getArray=t,e.getStringOrArray=function(e,o){let n=o;if(Is.definedString(e)){const t=e.toString().split(" ");0===t.length?e=o:n=t}else n=t(e,o);return n}})(Default||(Default={})),(e=>{function t(e,t=""){const o=e.toLowerCase();let n="text"===o?document.createTextNode(""):document.createElement(o);return Is.defined(t)&&(n.className=t),n}function o(){const e=document.documentElement;return{left:e.scrollLeft-(e.clientLeft||0),top:e.scrollTop-(e.clientTop||0)}}e.create=t,e.getOffset=function(e){const t={left:0,top:0};for(;e&&!isNaN(e.offsetLeft)&&!isNaN(e.offsetTop);)t.left+=e.offsetLeft-e.scrollLeft,t.top+=e.offsetTop-e.scrollTop,e=e.offsetParent;return t},e.getScrollPosition=o,e.getStyleValueByName=function(e,t){return getComputedStyle(e).getPropertyValue(t)},e.addNode=function(e,t){try{e.contains(t)||e.appendChild(t)}catch(e){console.warn(e.message)}},e.removeNode=function(e,t){try{e.contains(t)&&e.removeChild(t)}catch(e){console.warn(e.message)}},e.cancelBubble=function(e){e.preventDefault(),e.stopPropagation()},e.showElementAtMousePosition=function(e,t){let n=e.pageX,i=e.pageY;const r=o();t.style.display="block",n+t.offsetWidth>window.innerWidth?n-=t.offsetWidth:n++,i+t.offsetHeight>window.innerHeight?i-=t.offsetHeight:i++,n<r.left&&(n=e.pageX+1),i<r.top&&(i=e.pageY+1),t.style.left=`${n}px`,t.style.top=`${i}px`},e.showElementBasedOnCondition=function(e,t){t?"block"!==e.style.display&&(e.style.display="block"):"none"!==e.style.display&&(e.style.display="none")},e.createCheckBox=function(e,o){const n=t("div"),i=t("label","checkbox"),r=t("input");e.appendChild(n),n.appendChild(i),i.appendChild(r),r.type="checkbox";const l=t("span","check-mark"),s=t("span","text");return s.innerHTML=o,i.appendChild(l),i.appendChild(s),r},e.clearElementsByClassName=function(e,t){let o=e.getElementsByClassName(t);for(;o[0];)o[0].parentNode.removeChild(o[0])}})(DomElement||(DomElement={})),(e=>{let t;(t=e.Options||(e.Options={})).get=function(e){let t=Default.getObject(e,{});return t.order=Default.getNumber(t.order,0),t.attach=Default.getBoolean(t.attach,!0),t.sendClick=Default.getBoolean(t.sendClick,!1),t.alignTop=Default.getBoolean(t.alignTop,!1),t.alignRight=Default.getBoolean(t.alignRight,!1),t.isHint=Default.getBoolean(t.isHint,!1),t.alignHintToClickPosition=Default.getBoolean(t.alignHintToClickPosition,!1),t.showDisabledBackground=Default.getBoolean(t.showDisabledBackground,!0),t.removeHintWhenViewed=Default.getBoolean(t.removeHintWhenViewed,!1),t.group=Default.getString(t.group,Constant.DEFAULT_GROUP),t=function(e){return e.title=Default.getString(e.title,""),e.description=Default.getString(e.description,""),e.tooltip=Default.getString(e.tooltip,""),e}(t),t=function(e){return e.events=Default.getObject(e.events,{}),e.events.onEnter=Default.getFunction(e.events.onEnter,null),e.events.onLeave=Default.getFunction(e.events.onLeave,null),e.events.onClose=Default.getFunction(e.events.onClose,null),e.events.onFinish=Default.getFunction(e.events.onFinish,null),e.events.onOpen=Default.getFunction(e.events.onOpen,null),e.events.onStart=Default.getFunction(e.events.onStart,null),e.events.onAddStep=Default.getFunction(e.events.onAddStep,null),e.events.onRemoveStep=Default.getFunction(e.events.onRemoveStep,null),e}(t),t}})(Binding||(Binding={})),(e=>{let t;(t=e.Options||(e.Options={})).get=function(e=null){let t=Default.getObject(e,{});return t.safeMode=Default.getBoolean(t.safeMode,!0),t.domElementTypes=Default.getStringOrArray(t.domElementTypes,["*"]),t.showCloseButton=Default.getBoolean(t.showCloseButton,!0),t.shortcutKeysEnabled=Default.getBoolean(t.shortcutKeysEnabled,!0),t.showProgressDots=Default.getBoolean(t.showProgressDots,!0),t.browserUrlParametersEnabled=Default.getBoolean(t.browserUrlParametersEnabled,!0),t.showProgressDotNumbers=Default.getBoolean(t.showProgressDotNumbers,!1),t.showButtons=Default.getBoolean(t.showButtons,!0),t.showDoNotShowAgain=Default.getBoolean(t.showDoNotShowAgain,!1),t.tooltipDelay=Default.getNumber(t.tooltipDelay,750),t.showProgressDotToolTips=Default.getBoolean(t.showProgressDotToolTips,!0),t.closeDialogOnDisabledBackgroundClick=Default.getBoolean(t.closeDialogOnDisabledBackgroundClick,!1),t.showProgressBar=Default.getBoolean(t.showProgressBar,!1),t.scrollToElements=Default.getBoolean(t.scrollToElements,!1),t.dialogMovingEnabled=Default.getBoolean(t.dialogMovingEnabled,!1),t.showProgressBarText=Default.getBoolean(t.showProgressBarText,!1),t=function(e){return e.text=Default.getObject(e.text,{}),e.text.backButtonText=Default.getAnyString(e.text.backButtonText,"Back"),e.text.nextButtonText=Default.getAnyString(e.text.nextButtonText,"Next"),e.text.finishButtonText=Default.getAnyString(e.text.finishButtonText,"Finish"),e.text.closeButtonToolTipText=Default.getAnyString(e.text.closeButtonToolTipText,"Close"),e.text.doNotShowAgainText=Default.getAnyString(e.text.doNotShowAgainText,"Do not show again"),e.text.objectErrorText=Default.getAnyString(e.text.objectErrorText,"Errors in object: {{error_1}}, {{error_2}}"),e.text.attributeNotValidErrorText=Default.getAnyString(e.text.attributeNotValidErrorText,"The attribute '{{attribute_name}}' is not a valid object."),e.text.attributeNotSetErrorText=Default.getAnyString(e.text.attributeNotSetErrorText,"The attribute '{{attribute_name}}' has not been set correctly."),e.text.closeDialogConfirmationText=Default.getAnyString(e.text.closeDialogConfirmationText,""),e}(t),t=function(e){return e.events=Default.getObject(e.events,{}),e.events.onDoNotShowAgainChange=Default.getFunction(e.events.onDoNotShowAgainChange,null),e}(t),t}})(Config||(Config={})),(Trigger||(Trigger={})).customEvent=function(e,...t){Is.definedFunction(e)&&e.apply(null,[].slice.call(t,0))},(e=>{let t=null,o=0;function n(e,n,r){DomElement.cancelBubble(e),i(),o=setTimeout((()=>{t.innerHTML=n,t.style.display="block",DomElement.showElementAtMousePosition(e,t)}),r.tooltipDelay)}function i(){Is.defined(t)&&(0!==o&&(clearTimeout(o),o=0),"block"===t.style.display&&(t.style.display="none"))}e.render=function(){Is.defined(t)||(t=DomElement.create("div","journey-js-tooltip"),t.style.display="none",document.body.appendChild(t),document.body.addEventListener("mousemove",(()=>{i()})),document.addEventListener("scroll",(()=>{i()})))},e.add=function(e,t,o){null!==e&&(e.onmousemove=e=>{n(e,t,o)})},e.show=n,e.hide=i})(ToolTip||(ToolTip={})),(e=>{let t;(e=>{let t;e.render=function(e,o){t=DomElement.create("div","journey-js-disabled-background"),t.onclick=()=>{e.closeDialogOnDisabledBackgroundClick&&o()}},e.show=function(){DomElement.addNode(document.body,t)},e.hide=function(){DomElement.removeNode(document.body,t)}})(t=e.Background||(e.Background={}))})(Disabled||(Disabled={})),(()=>{let _configuration={},_configuration_ShortcutKeysEnabled=!0,_groups_Current=Constant.DEFAULT_GROUP,_groups={},_element_Focus_Element_PositionStyle="",_element_Dialog=null,_element_Dialog_Close_Button=null,_element_Dialog_Title=null,_element_Dialog_Description=null,_element_Dialog_CheckBox_Container=null,_element_Dialog_CheckBox_Input=null,_element_Dialog_ProgressDots=null,_element_Dialog_ProgressBar=null,_element_Dialog_ProgressBar_Percentage=null,_element_Dialog_ProgressBar_Percentage_Text=null,_element_Dialog_Buttons=null,_element_Dialog_Buttons_Back_Button=null,_element_Dialog_Buttons_Next_Button=null,_element_Dialog_IsHint=!1,_element_Dialog_Move_Original_X=0,_element_Dialog_Move_Original_Y=0,_element_Dialog_Move_IsMoving=!1,_element_Dialog_Move_X=0,_element_Dialog_Move_Y=0;function setupDefaultGroup(e=null){_groups=Default.getObject(e,{}),_groups[Constant.DEFAULT_GROUP]={json:{},keys:[],position:0}}function setupNewGroup(e){_groups.hasOwnProperty(e)||(_groups[e]={json:{},keys:[],position:0})}function getGroupBindingOptions(){return _groups[_groups_Current].json[_groups[_groups_Current].keys[_groups[_groups_Current].position]]}function renderDialog(){_element_Dialog=DomElement.create("div","journey-js-dialog"),_element_Dialog.style.display="none",document.body.appendChild(_element_Dialog),_element_Dialog_Close_Button=DomElement.create("button","close"),_element_Dialog.appendChild(_element_Dialog_Close_Button),_element_Dialog_Close_Button.onclick=()=>{onDialogClose()},ToolTip.add(_element_Dialog_Close_Button,_configuration.text.closeButtonToolTipText,_configuration),_element_Dialog_Title=DomElement.create("div","title"),_element_Dialog.appendChild(_element_Dialog_Title),_element_Dialog_Description=DomElement.create("div","description"),_element_Dialog.appendChild(_element_Dialog_Description),_element_Dialog_CheckBox_Container=DomElement.create("div","checkbox-container"),_element_Dialog.appendChild(_element_Dialog_CheckBox_Container),_element_Dialog_CheckBox_Input=DomElement.createCheckBox(_element_Dialog_CheckBox_Container,_configuration.text.doNotShowAgainText),_element_Dialog_CheckBox_Input.onchange=()=>{_configuration.showDoNotShowAgain&&Trigger.customEvent(_configuration.events.onDoNotShowAgainChange,_element_Dialog_CheckBox_Input.checked)},_element_Dialog_ProgressDots=DomElement.create("div","progress-dots"),_element_Dialog.appendChild(_element_Dialog_ProgressDots),_element_Dialog_ProgressBar=DomElement.create("div","progress-bar"),_element_Dialog.appendChild(_element_Dialog_ProgressBar),_element_Dialog_ProgressBar_Percentage=DomElement.create("div","progress-bar-percentage"),_element_Dialog_ProgressBar.appendChild(_element_Dialog_ProgressBar_Percentage),_element_Dialog_ProgressBar_Percentage_Text=DomElement.create("p","progress-bar-percentage-text"),_element_Dialog_ProgressBar_Percentage.appendChild(_element_Dialog_ProgressBar_Percentage_Text),_element_Dialog_Buttons=DomElement.create("div","buttons"),_element_Dialog.appendChild(_element_Dialog_Buttons),_element_Dialog_Buttons_Back_Button=DomElement.create("button","back"),_element_Dialog_Buttons_Back_Button.onclick=onDialogBack,_element_Dialog_Buttons.appendChild(_element_Dialog_Buttons_Back_Button),_element_Dialog_Buttons_Next_Button=DomElement.create("button","next"),_element_Dialog_Buttons_Next_Button.onclick=onDialogNext,_element_Dialog_Buttons.appendChild(_element_Dialog_Buttons_Next_Button),makeDialogMovable()}function onDialogClose(e=!0){let t=!1;if(t=!Is.definedString(_configuration.text.closeDialogConfirmationText)||!e||confirm(_configuration.text.closeDialogConfirmationText),t){const e=getGroupBindingOptions();Is.defined(e)&&Is.defined(e._currentView.element)&&Trigger.customEvent(e.events.onClose,e._currentView.element),removeFocusClassFromLastElement(!1),Disabled.Background.hide(),ToolTip.hide(),_element_Dialog.style.display="none"}}function onDialogBack(){_groups[_groups_Current].position>0&&(removeFocusClassFromLastElement(),_groups[_groups_Current].position--,showDialogAndSetPosition())}function onDialogNext(){if(_groups[_groups_Current].position===_groups[_groups_Current].keys.length-1){const e=getGroupBindingOptions();onDialogClose(!1),Trigger.customEvent(e.events.onFinish,e._currentView.element)}else removeFocusClassFromLastElement(),_groups[_groups_Current].position++,showDialogAndSetPosition()}function showDialogAndSetPosition(){const e=getGroupBindingOptions();if(Is.defined(e)&&Is.defined(e._currentView.element)){e.showDisabledBackground?Disabled.Background.show():Disabled.Background.hide(),ToolTip.hide(),_element_Dialog_Close_Button.style.display=_configuration.showCloseButton?"block":"none",_configuration_ShortcutKeysEnabled=!0,e._currentView.element.classList.add("journey-js-element-focus"),_configuration.scrollToElements&&e._currentView.element.scrollIntoView();const t=DomElement.getStyleValueByName(e._currentView.element,"position");""!==t&&"static"===t.toLowerCase()&&(_element_Focus_Element_PositionStyle=t,e._currentView.element.style.position="relative"),DomElement.showElementBasedOnCondition(_element_Dialog_CheckBox_Container,_configuration.showDoNotShowAgain),DomElement.showElementBasedOnCondition(_element_Dialog_ProgressDots,_configuration.showProgressDots&&_groups[_groups_Current].keys.length>1),DomElement.showElementBasedOnCondition(_element_Dialog_ProgressBar,_configuration.showProgressBar&&_groups[_groups_Current].keys.length>1),DomElement.showElementBasedOnCondition(_element_Dialog_ProgressBar_Percentage_Text,_configuration.showProgressBarText),DomElement.showElementBasedOnCondition(_element_Dialog_Buttons,_configuration.showButtons),_element_Dialog_Buttons_Back_Button.innerHTML=_configuration.text.backButtonText,_element_Dialog_Buttons_Back_Button.disabled=0===_groups[_groups_Current].position,_groups[_groups_Current].position>=_groups[_groups_Current].keys.length-1?_element_Dialog_Buttons_Next_Button.innerHTML=_configuration.text.finishButtonText:_element_Dialog_Buttons_Next_Button.innerHTML=_configuration.text.nextButtonText,setDialogText(e),setDialogPosition(null,e),buildProcessDots(),setProgressBarPosition(),Trigger.customEvent(e.events.onEnter,e._currentView.element),e.sendClick&&e._currentView.element.click()}}function setDialogText(e){Is.definedString(e.title)?_element_Dialog_Title.innerHTML=e.title:_element_Dialog_Title.innerHTML="",Is.definedString(e.description)?_element_Dialog_Description.innerHTML=e.description:_element_Dialog_Description.innerHTML=""}function setDialogPosition(e,t){if("block"!==_element_Dialog.style.display&&(_element_Dialog.style.display="block",Trigger.customEvent(t.events.onOpen,t._currentView.element)),0===_groups[_groups_Current].position&&Trigger.customEvent(t.events.onStart,t._currentView.element),_element_Dialog_IsHint=!0===t.isHint,t.attach||t.isHint)if(t.isHint&&t.alignHintToClickPosition)DomElement.showElementAtMousePosition(e,_element_Dialog);else{const e=DomElement.getOffset(t._currentView.element);let o=e.top+t._currentView.element.offsetHeight,n=e.left;(n+_element_Dialog.offsetWidth>window.innerWidth||t.alignRight)&&(n-=_element_Dialog.offsetWidth,n+=t._currentView.element.offsetWidth),(o+_element_Dialog.offsetHeight>window.innerHeight||t.alignTop)&&(o-=_element_Dialog.offsetHeight+t._currentView.element.offsetHeight),_element_Dialog.style.top=`${o}px`,_element_Dialog.style.left=`${n}px`}else{const e=DomElement.getScrollPosition(),t=Math.max(0,(window.innerWidth-_element_Dialog.offsetWidth)/2+e.left),o=Math.max(0,(window.innerHeight-_element_Dialog.offsetHeight)/2+e.top);_element_Dialog.style.left=`${t}px`,_element_Dialog.style.top=`${o}px`}}function removeFocusClassFromLastElement(e=!0){const t=getGroupBindingOptions();Is.defined(t)&&Is.defined(t._currentView.element)&&(t._currentView.element.classList.remove("journey-js-element-focus"),Is.defined(_element_Focus_Element_PositionStyle)&&(t._currentView.element.style.position=_element_Focus_Element_PositionStyle),e&&Trigger.customEvent(t.events.onLeave,t._currentView.element))}function buildProcessDots(){if(_element_Dialog_ProgressDots.innerHTML="",_configuration.showProgressDots){const e=_groups[_groups_Current].keys.length;for(let t=0;t<e;t++)buildProgressDot(t,_groups[_groups_Current].keys[t])}}function buildProgressDot(e,t){const o=_groups[_groups_Current].json[t];let n;e===_groups[_groups_Current].position?n=DomElement.create("div","dot-active"):(n=DomElement.create("div","dot"),n.onclick=()=>{removeFocusClassFromLastElement(),_groups[_groups_Current].position=e,showDialogAndSetPosition()}),_element_Dialog_ProgressDots.appendChild(n),_configuration.showProgressDotToolTips&&(Is.definedString(o.tooltip)?ToolTip.add(n,o.tooltip,_configuration):ToolTip.add(n,o.title,_configuration)),_configuration.showProgressDotNumbers&&(n.classList.add("dot-number"),n.innerHTML=(e+1).toString())}function setProgressBarPosition(){if(_configuration.showProgressBar){const e=_element_Dialog_ProgressBar.offsetWidth/_groups[_groups_Current].keys.length,t=(_groups[_groups_Current].position+1)*e,o=Math.ceil((_groups[_groups_Current].position+1)/_groups[_groups_Current].keys.length*100);_element_Dialog_ProgressBar_Percentage.style.width=`${t}px`,_element_Dialog_ProgressBar_Percentage_Text.innerHTML=`${o}%`}}function makeDialogMovable(){_element_Dialog_Title.onmousedown=onMoveTitleBarMouseDown,_element_Dialog_Title.onmouseup=onMoveTitleBarMouseUp,_element_Dialog_Title.oncontextmenu=onMoveTitleBarMouseUp,document.body.addEventListener("mousemove",onMoveDocumentMouseMove),document.body.addEventListener("mouseleave",onMoveDocumentMouseLeave)}function onMoveTitleBarMouseDown(e){_element_Dialog_Move_IsMoving||_element_Dialog_IsHint||!_configuration.dialogMovingEnabled||(_element_Dialog.classList.add("journey-js-dialog-moving"),_element_Dialog_Move_IsMoving=!0,_element_Dialog_Move_X=e.pageX-_element_Dialog.offsetLeft,_element_Dialog_Move_Y=e.pageY-_element_Dialog.offsetTop,_element_Dialog_Move_Original_X=_element_Dialog.offsetLeft,_element_Dialog_Move_Original_Y=_element_Dialog.offsetTop)}function onMoveTitleBarMouseUp(){_element_Dialog_Move_IsMoving&&(_element_Dialog_Move_IsMoving=!1,_element_Dialog_Move_Original_X=0,_element_Dialog_Move_Original_Y=0,_element_Dialog.className="journey-js-dialog")}function onMoveDocumentMouseMove(e){_element_Dialog_Move_IsMoving&&(_element_Dialog.style.left=e.pageX-_element_Dialog_Move_X+"px",_element_Dialog.style.top=e.pageY-_element_Dialog_Move_Y+"px")}function onMoveDocumentMouseLeave(){_element_Dialog_Move_IsMoving&&(_element_Dialog.style.left=`${_element_Dialog_Move_Original_X}px`,_element_Dialog.style.top=`${_element_Dialog_Move_Original_Y}px`,_element_Dialog_Move_IsMoving=!1,_element_Dialog_Move_Original_X=0,_element_Dialog_Move_Original_Y=0,_element_Dialog.className="journey-js-dialog")}function getElements(){const e=_configuration.domElementTypes,t=e.length;for(let o=0;o<t;o++){const t=document.getElementsByTagName(e[o]),n=[].slice.call(t),i=n.length;for(let e=0;e<i&&getElement(n[e]);e++);}_groups[_groups_Current].keys.sort()}function getElement(e){let t=!0;if(Is.defined(e)&&e.hasAttribute(Constant.JOURNEY_JS_ATTRIBUTE_NAME)){const o=e.getAttribute(Constant.JOURNEY_JS_ATTRIBUTE_NAME);if(Is.definedString(o)){const n=getObjectFromString(o);n.parsed&&Is.definedObject(n.object)?setupElement(e,Binding.Options.get(n.object)):_configuration.safeMode||(console.error(_configuration.text.attributeNotValidErrorText.replace("{{attribute_name}}",Constant.JOURNEY_JS_ATTRIBUTE_NAME)),t=!1)}else _configuration.safeMode||(console.error(_configuration.text.attributeNotSetErrorText.replace("{{attribute_name}}",Constant.JOURNEY_JS_ATTRIBUTE_NAME)),t=!1)}return t}function setupElement(e,t){t._currentView={},t._currentView.element=e,Is.definedNumber(t.order)&&(Is.definedString(t.title)||Is.definedString(t.description))&&(e.removeAttribute(Constant.JOURNEY_JS_ATTRIBUTE_NAME),t.isHint?renderHint(t):(setupNewGroup(t.group),_groups[t.group].json[t.order]=t,_groups[t.group].keys.push(t.order),Trigger.customEvent(t.events.onAddStep,e)))}function renderHint(e){const t=DomElement.getStyleValueByName(e._currentView.element,"position");""!==t&&"static"===t.toLowerCase()&&(e._currentView.element.style.position="relative");const o=DomElement.create("div","journey-js-hint");e._currentView.element.appendChild(o),o.onclick=t=>{DomElement.cancelBubble(t),_element_Dialog_CheckBox_Container.style.display="none",_element_Dialog_ProgressDots.style.display="none",_element_Dialog_ProgressBar.style.display="none",_element_Dialog_Buttons.style.display="none",_configuration_ShortcutKeysEnabled=!1,setDialogText(e),setDialogPosition(t,e),e.removeHintWhenViewed&&DomElement.clearElementsByClassName(e._currentView.element,"journey-js-hint")}}function buildDocumentEvents(e=!0){const t=e?document.addEventListener:document.removeEventListener,o=e?window.addEventListener:window.removeEventListener;_configuration.shortcutKeysEnabled&&t("keydown",onWindowKeyDown),o("resize",onWindowResize)}function onWindowKeyDown(e){_public.isOpen()&&_configuration.shortcutKeysEnabled&&("Escape"===e.code?(e.preventDefault(),onDialogClose()):_configuration_ShortcutKeysEnabled&&("ArrowLeft"===e.code?(e.preventDefault(),onDialogBack()):"ArrowRight"===e.code?(e.preventDefault(),onDialogNext()):"ArrowUp"===e.code?(e.preventDefault(),onWindowKeyCodeUp()):"ArrowDown"===e.code&&(e.preventDefault(),onWindowKeyCodeDown())))}function onWindowResize(){_public.isOpen()&&showDialogAndSetPosition()}function onWindowKeyCodeUp(){0!==_groups[_groups_Current].position&&(removeFocusClassFromLastElement(),_groups[_groups_Current].position=0,showDialogAndSetPosition())}function onWindowKeyCodeDown(){_groups[_groups_Current].position!==_groups[_groups_Current].keys.length-1&&(removeFocusClassFromLastElement(),_groups[_groups_Current].position=_groups[_groups_Current].keys.length-1,showDialogAndSetPosition())}function getBrowserUrlParameters(){let e=!1;if(_configuration.browserUrlParametersEnabled){const t=getBrowserUrlArguments(window.location.href);if(Is.defined(t.sjOrderId)){const e=parseInt(t.sjOrderId,10);!isNaN(e)&&e<=_groups[_groups_Current].keys.length-1&&(_groups[_groups_Current].position=e)}Is.defined(t.sjShow)&&(e="true"===t.sjShow)}return e}function getBrowserUrlArguments(e){const t={},o=e.split("?");if(o.length>1){const e=o[1].split("&"),n=e.length;for(let o=0;o<n;o++){const n=e[o].split("=");t[n[0]]=n[1]}}return t}function getObjectFromString(objectString){const result={parsed:!0,object:null};try{Is.definedString(objectString)&&(result.object=JSON.parse(objectString))}catch(e1){try{result.object=eval(`(${objectString})`),Is.definedFunction(result.object)&&(result.object=result.object())}catch(e){_configuration.safeMode||(console.error(_configuration.text.objectErrorText.replace("{{error_1}}",e1.message).replace("{{error_2}}",e.message)),result.parsed=!1),result.object=null}}return result}function resetDialogPosition(){_public.isOpen()&&(onDialogClose(!1),_groups[_groups_Current].position=0)}const _public={start:function(e=""){return _public.isOpen()||(_groups_Current=Default.getString(e,Constant.DEFAULT_GROUP),_groups.hasOwnProperty(_groups_Current)&&(_groups[_groups_Current].position=0,showDialogAndSetPosition())),_public},show:function(e=""){return _public.isOpen()||(_groups_Current=Default.getString(e,_groups_Current),_groups.hasOwnProperty(_groups_Current)&&(_groups[_groups_Current].position===_groups[_groups_Current].keys.length-1&&(_groups[_groups_Current].position=0),showDialogAndSetPosition())),_public},hide:function(){return _public.isOpen()&&onDialogClose(),_public},isOpen:function(){return Is.defined(_element_Dialog)&&"block"===_element_Dialog.style.display},isComplete:function(){return _groups[_groups_Current].position>=_groups[_groups_Current].keys.length-1},addDocumentSteps:function(){return getElements(),_public},addStep:function(e,t){return Is.definedObject(e)&&Is.definedObject(t)&&(setupElement(e,Binding.Options.get(t)),_groups[_groups_Current].keys.sort(),resetDialogPosition()),_public},removeStep:function(e){if(Is.definedObject(e)){let t=!1;for(let o in _groups)if(_groups.hasOwnProperty(o))for(let n in _groups[o].json)if(_groups[o].json.hasOwnProperty(n)){const i=_groups[o].json[n];if(i._currentView.element===e){Trigger.customEvent(i.events.onRemoveStep,i._currentView.element),_groups[o].keys.splice(_groups[o].keys.indexOf(i.order),1),delete _groups[o].json[i.order],_groups[o].keys.sort(),t=!0;break}}t?resetDialogPosition():DomElement.clearElementsByClassName(e,"journey-js-hint")}return _public},clearSteps:function(e=""){resetDialogPosition();for(let t in _groups)if(_groups.hasOwnProperty(t)&&(!Is.definedString(e)||e===t))for(let e in _groups[t].json)if(_groups[t].json.hasOwnProperty(e)){const o=_groups[t].json[e];Trigger.customEvent(o.events.onRemoveStep,o._currentView.element)}return Is.definedString(e)?_groups.hasOwnProperty(e)&&delete _groups[e]:_groups={},Is.definedString(e)&&e!==Constant.DEFAULT_GROUP||setupDefaultGroup(_groups),_public},clearHints:function(){return DomElement.clearElementsByClassName(document.body,"journey-js-hint"),_public},reverseStepOrder:function(){return _groups[_groups_Current].keys.reverse(),resetDialogPosition(),_public},setConfiguration:function(e){if(Is.definedObject(e)){let t=!1;const o=_configuration;for(let n in e)e.hasOwnProperty(n)&&_configuration.hasOwnProperty(n)&&o[n]!==e[n]&&(o[n]=e[n],t=!0);t&&(_configuration=Config.Options.get(o))}return _public},getVersion:function(){return"2.1.0"}};_configuration=Config.Options.get(),document.addEventListener("DOMContentLoaded",(()=>{setupDefaultGroup(),Disabled.Background.render(_configuration,onDialogClose),renderDialog(),ToolTip.render(),getElements(),buildDocumentEvents(),getBrowserUrlParameters()&&_public.show()})),Is.defined(window.$journey)||(window.$journey=_public)})();